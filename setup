#! /bin/sh
#
# Move dotfiles into place
#

SRC=$HOME/src/dotfiles

logline() {
   echo "*** $1"
}

#prune() {
#    # rm old dotfile symlinks directly inside target directory
#    logline 'Pruning old symlinks...'
#    find -L "$1" -maxdepth 1 -type l -name '.*' -exec /bin/rm -i -- {} +
#}

find_dotfiles() {
    # find all files beginning with 'dot.' inside a directory
    find "$1" -maxdepth 1 -name '.?*' 
}

copy_dotfiles() {
    # find all dotfiles beginning with '.' inside a directory, then copy
    find_dotfiles $1 | while read item; do /bin/cp -a -v $item $HOME; done
}

# Link dotfiles
logline 'Creating standard symlinks...'
copy_dotfiles $HOME/src/dotfiles/$1

#prune "$HOME"
